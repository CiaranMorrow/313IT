## TROUBLESHOOTING ERROR :  https://itsfoss.com/could-not-get-lock-error/
## https://serverfault.com/questions/992923/the-value-true-type-bool-in-a-string-field-was-converted-to-utrue-type-stri
## https://serverfault.com/questions/883314/show-updated-packages-with-ansible-package-management


    - name: Ubuntu Update
      apt:
        #update_cache: true
        upgrade: 'yes'
      register: UbuntuUpgrades

    - debug:
        msg: " {{ UbuntuUpgrades.stdout_lines }} "
    - name: List installed and updated packages
      shell: grep -E "^$(date +%Y-%m-%d).+ (install|upgrade) " /var/log/dpkg.log |cut -d " " -f 3-5
      register: result
      when: UbuntuUpgrades.changed

    - name: Show Output
      debug: msg="{{ result.stdout_lines }}"
      when: UbuntuUpgrades.changed
